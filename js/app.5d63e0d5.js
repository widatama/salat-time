(function(t){function e(e){for(var n,o,i=e[0],u=e[1],s=e[2],d=0,b=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&b.push(r[o][0]),r[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);l&&l(e);while(b.length)b.shift()();return c.push.apply(c,s||[]),a()}function a(){for(var t,e=0;e<c.length;e++){for(var a=c[e],n=!0,i=1;i<a.length;i++){var u=a[i];0!==r[u]&&(n=!1)}n&&(c.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},c=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="salat-time/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var s=0;s<i.length;s++)e(i[s]);var l=u;c.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23"),r={class:"app-header"},c=Object(n["f"])("h1",{class:"app__title"},[Object(n["f"])("strong",null,"Salat"),Object(n["e"])("Time")],-1),o={class:"app-content"};function i(t,e,a,i,u,s){var l=Object(n["u"])("current-time"),d=Object(n["u"])("router-view");return Object(n["p"])(),Object(n["d"])(n["a"],null,[Object(n["f"])("header",r,[c,Object(n["f"])(l)]),Object(n["f"])("section",o,[Object(n["f"])(d)])],64)}var u={class:"current-time"},s={class:"clock"},l=Object(n["f"])("span",{class:"clock__ticker"}," : ",-1);function d(t,e,a,r,c,o){return Object(n["p"])(),Object(n["d"])("div",u,[Object(n["f"])("span",s,[Object(n["e"])(Object(n["w"])(t.hour),1),l,Object(n["e"])(Object(n["w"])(t.minute),1)])])}var b=a("b166"),f=1e3,p=Object(n["g"])({name:"current-time",setup:function(){var t=Object(n["s"])(new Date);return Object(n["n"])((function(){setInterval((function(){t.value=new Date}),f)})),{dateObj:t,hour:Object(n["b"])((function(){return Object(b["a"])(t.value,"HH")})),minute:Object(n["b"])((function(){return Object(b["a"])(t.value,"mm")}))}}});p.render=d;var O=p,j={components:{"current-time":O}};j.render=i;var v=j,m=a("6c02"),g={class:"salat-next"},y={class:"salat-today"};function h(t,e,a,r,c,o){var i=Object(n["u"])("loading-cue"),u=Object(n["u"])("notification"),s=Object(n["u"])("salat"),l=Object(n["u"])("current-location"),d=Object(n["u"])("current-day"),b=Object(n["u"])("salat-list");return t.isLoading?(Object(n["p"])(),Object(n["d"])(i,{key:0,"loading-text":t.appPhase},null,8,["loading-text"])):(Object(n["p"])(),Object(n["d"])(n["a"],{key:1},[t.isError?(Object(n["p"])(),Object(n["d"])(u,{key:0,"notification-message":t.appError},null,8,["notification-message"])):(Object(n["p"])(),Object(n["d"])(n["a"],{key:1},[Object(n["f"])("div",g,[Object(n["f"])(s,{salat:t.nextSalat,"disp-type":"next"},null,8,["salat"]),Object(n["f"])(l,{location:t.location},null,8,["location"])]),Object(n["f"])("div",y,[Object(n["f"])(d),Object(n["f"])(b,{"salat-list":t.todaySalat},null,8,["salat-list"])])],64))],64))}var P=a("5530"),S=a("5502"),A={class:"current-day"};function E(t,e,a,r,c,o){return Object(n["p"])(),Object(n["d"])("div",A,Object(n["w"])(t.day)+" "+Object(n["w"])(t.date)+" "+Object(n["w"])(t.month)+" "+Object(n["w"])(t.year),1)}var w=6e4,T=Object(n["g"])({name:"current-day",setup:function(){var t=Object(n["s"])(new Date);return Object(n["n"])((function(){setInterval((function(){t.value=new Date}),w)})),{date:Object(n["b"])((function(){return Object(b["a"])(t.value,"dd")})),dateObj:t,day:Object(n["b"])((function(){return Object(b["a"])(t.value,"EEEE")})),month:Object(n["b"])((function(){return Object(b["a"])(t.value,"MMMM")})),year:Object(n["b"])((function(){return Object(b["a"])(t.value,"yyyy")}))}}});T.render=E;var _=T,D={class:"loading-cue"};function x(t,e,a,r,c,o){return Object(n["p"])(),Object(n["d"])("div",D,Object(n["w"])(t.loadingText),1)}var k=Object(n["g"])({props:["loadingText"]});k.render=x;var L=k,U={class:"location"};function M(t,e,a,r,c,o){return Object(n["p"])(),Object(n["d"])("div",U,[Object(n["f"])("div",null,Object(n["w"])(t.area),1),Object(n["f"])("div",null,Object(n["w"])(t.country),1)])}a("a15b");var N=Object(n["g"])({props:{location:{type:Object,required:!0}},setup:function(t){var e=Object(n["b"])((function(){var e=[];return t.location.city?e.push(t.location.city):t.location.village&&e.push(t.location.village),t.location.state&&e.push(t.location.state),e.join(", ")}));return{area:e,country:Object(n["b"])((function(){return t.location.country}))}}});N.render=M;var R=N,z={class:"notification"};function H(t,e,a,r,c,o){return Object(n["p"])(),Object(n["d"])("div",z,Object(n["w"])(t.notificationMessage),1)}var I=Object(n["g"])({props:["notificationMessage"]});I.render=H;var q=I;a("b0c0");function F(t,e,a,r,c,o){var i=Object(n["u"])("time-display");return Object(n["p"])(),Object(n["d"])("div",{class:["salat",t.className("salat--")]},[Object(n["f"])("div",{class:["salat__name",t.className("salat__name--")]},Object(n["w"])(t.salat.name),3),Object(n["f"])("div",{class:["salat__time",t.className("salat__time--")]},[Object(n["f"])(i,{time:t.salat.time},null,8,["time"])],2)],2)}var C={class:"time-display"};function G(t,e,a,r,c,o){return Object(n["p"])(),Object(n["d"])("div",C,Object(n["w"])(t.time),1)}var X=Object(n["g"])({props:["time"]});X.render=G;var Y=X,J=Object(n["g"])({components:{"time-display":Y},props:{salat:{type:Object},dispType:{type:String}},setup:function(t){return{salat:t.salat,className:function(e){return t.dispType?e+t.dispType:""}}}});J.render=F;var $=J,B={class:"salat-items"},K={class:"salat-item"};function Q(t,e,a,r,c,o){var i=Object(n["u"])("salat");return Object(n["p"])(),Object(n["d"])("ul",B,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["t"])(t.salatList,(function(t){return Object(n["p"])(),Object(n["d"])("li",K,[Object(n["f"])(i,{salat:t},null,8,["salat"])])})),256))])}var V=Object(n["g"])({components:{salat:$},props:["salatList"]});V.render=Q;var W=V,Z=6e5,tt=Object(n["g"])({name:"day",components:{"current-day":_,"current-location":R,"loading-cue":L,notification:q,salat:$,"salat-list":W},computed:Object(P["a"])({},Object(S["b"])({appError:"appError",appPhase:"appPhase",isError:"isError",isLoading:"isLoading",location:"location",nextSalat:"nextSalat",todaySalat:"todaySalat"})),created:function(){var t=this;this.$store.dispatch("initializeState"),setInterval((function(){t.$store.dispatch("loadSalat")}),Z)}});tt.render=h;var et=tt,at=[{path:"/",name:"Day",component:et}],nt=Object(m["a"])({history:Object(m["b"])("salat-time/"),routes:at}),rt=nt,ct=a("c458"),ot=a.n(ct),it=a("1816"),ut=a.n(it),st=(a("d3b7"),{locate:function(){return new Promise((function(t,e){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(t,e,{enableHighAccuracy:!0}):e(Error("Geolocation not available"))}))}}),lt=st,dt={};function bt(t){if(t.status>=200&&t.status<300||t.ok)return t;var e=new Error(t.statusText);throw e.response=t,e}dt.get=function(t,e){return fetch(t,e).then(bt).then((function(t){return t.json()})).catch((function(t){throw t}))};var ft=dt;function pt(t){var e={};return e.country=t.country_name,e.city=t.city,e.village=t.district,e.state=t.region,e.timezone=t.timezone_name,e.latitude=parseFloat(t.latitude),e.longitude=parseFloat(t.longitude),e}function Ot(t){var e={};return e.country=t.address.country,t.address.state_district?e.city=t.address.state_district:e.city=t.address.city,e.village=t.address.village,e.state=t.address.state,e.latitude=parseFloat(t.lat),e.longitude=parseFloat(t.lon),e}var jt={transformIPLocationResponse:pt,transformReverseGeolocationResponse:Ot},vt=jt,mt={};function gt(){return"https://json.geoiplookup.io/"}function yt(t){var e="https://nominatim.openstreetmap.org/reverse?format=json&zoom=15&addressdetails=1",a=new ut.a(e,!0),n=a.query;return n.lat=t.latitude,n.lon=t.longitude,a.set("query",n),a.href}mt.get=function(){return lt.locate().then((function(t){var e=yt(t.coords);return ft.get(e).then((function(t){var e=vt.transformReverseGeolocationResponse(t),a=ot.a.determine();return e.timezone=a.name(),e}))}),(function(){var t=gt();return ft.get(t).then((function(t){return vt.transformIPLocationResponse(t)}))}))};var ht=mt,Pt=(a("25f0"),a("3ca3"),a("ddb0"),a("f7f1")),St=(a("d81d"),a("b64b"),a("1276"),a("ac1f"),a("99af"),a("7db0"),a("2cf3")),At=a("1212"),Et={};function wt(t,e){var a=Object.keys(t).map((function(a){var n=t[a].split(":").join(" : ");return{name:a,date:e,time:n}}));return a}function Tt(t){var e=Object(St["a"])("".concat(t.date," ").concat(t.time),"d MMM yyyy HH : mm",new Date);return!!Object(At["a"])(e,new Date)}function _t(t){var e={};return Object.assign(e,t),delete e.Sunrise,delete e.Sunset,delete e.Imsak,delete e.Midnight,e}Et.transformSalatData=function(t){var e=_t(t.timings);return wt(e,t.date.readable)},Et.getNextSalat=function(t,e){var a=Et.transformSalatData(t),n=Et.transformSalatData(e);return a.concat(n).find(Tt)};var Dt=Et,xt={};function kt(t,e){var a="https://api.aladhan.com/timings/",n=new ut.a(a,!0),r=n.query;return n.pathname=[n.pathname,e].join(""),r.latitude=t.latitude.toString(),r.longitude=t.longitude.toString(),r.timezonestring=t.timezone,r.method="3",n.set("query",r),n.href}xt.get=function(t){var e=kt(t,Object(b["a"])(new Date,"t")),a=kt(t,Object(b["a"])(Object(Pt["a"])(new Date,1),"t"));return Promise.all([ft.get(e),ft.get(a)]).then((function(t){var e=Dt.transformSalatData(t[0].data),a=Dt.getNextSalat(t[0].data,t[1].data);return{todaySalat:e,nextSalat:a}}))};var Lt=xt;function Ut(t){var e=t.commit;ht.get().then((function(t){return e("UPDATE_APPPHASE","locating"),e("UPDATE_LOCATION",t),t})).then((function(t){return e("UPDATE_APPPHASE","loading salat"),Lt.get({latitude:t.latitude,longitude:t.longitude,timezone:t.timezone})})).then((function(t){e("UPDATE_TODAYSALAT",t.todaySalat),e("UPDATE_NEXTSALAT",t.nextSalat),e("UPDATE_APPPHASE","standby")})).catch((function(t){if("Failed to fetch"===t.message){var a=new Error("Network error, please check your connection and disable adblock");e("UPDATE_APPPHASE","network error"),e("UPDATE_APPERROR",a)}console.error(t)}))}function Mt(t){var e=t.commit,a=t.state;Lt.get(a.location).then((function(t){e("UPDATE_TODAYSALAT",t.todaySalat),e("UPDATE_NEXTSALAT",t.nextSalat)}))}var Nt,Rt={initializeState:Ut,loadSalat:Mt},zt=Rt,Ht=function(t){var e=t.appPhase;return"loading salat"===e||"locating"===e},It=function(t){var e=t.appPhase;return e.indexOf("error")>-1},qt=function(t){return t.appPhase},Ft=function(t){return t.appError},Ct=function(t){return t.location},Gt=function(t){return t.todaySalat},Xt=function(t){return t.nextSalat},Yt={isLoading:Ht,isError:It,appPhase:qt,appError:Ft,location:Ct,todaySalat:Gt,nextSalat:Xt},Jt=Yt,$t=a("ade3"),Bt="UPDATE_LOCATION",Kt="UPDATE_APPPHASE",Qt="UPDATE_APPERROR",Vt="UPDATE_TODAYSALAT",Wt="UPDATE_NEXTSALAT",Zt=(Nt={},Object($t["a"])(Nt,Kt,(function(t,e){t.appPhase=e})),Object($t["a"])(Nt,Qt,(function(t,e){t.appError=e})),Object($t["a"])(Nt,Bt,(function(t,e){t.location=e})),Object($t["a"])(Nt,Vt,(function(t,e){t.todaySalat=e})),Object($t["a"])(Nt,Wt,(function(t,e){t.nextSalat=e})),Nt),te=Zt,ee=Object(S["a"])({actions:zt,getters:Jt,mutations:te,state:{appPhase:"locating",appError:{},location:{country:"",city:"",time_zone:"",latitude:0,longitude:0},todaySalat:[{name:"",date:"",time:""}],nextSalat:{name:"",date:"",time:""}}});a("ce87");Object(n["c"])(v).use(ee).use(rt).mount("#app")},ce87:function(t,e,a){}});
//# sourceMappingURL=app.5d63e0d5.js.map