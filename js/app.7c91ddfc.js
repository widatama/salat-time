(function(t){function e(e){for(var n,c,i=e[0],s=e[1],l=e[2],d=0,b=[];d<i.length;d++)c=i[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&b.push(r[c][0]),r[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);u&&u(e);while(b.length)b.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var s=a[i];0!==r[s]&&(n=!1)}n&&(o.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},r={app:0},o=[];function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=s;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23"),r={class:"app-header"},o=Object(n["f"])("h1",{class:"app__title"},[Object(n["f"])("strong",null,"Salat"),Object(n["e"])("Time")],-1),c={class:"app-content"};function i(t,e,a,i,s,l){var u=Object(n["u"])("current-time"),d=Object(n["u"])("router-view");return Object(n["p"])(),Object(n["d"])(n["a"],null,[Object(n["f"])("header",r,[o,Object(n["f"])(u)]),Object(n["f"])("section",c,[Object(n["f"])(d)])],64)}var s={class:"current-time"},l={class:"clock"},u=Object(n["f"])("span",{class:"clock__ticker"}," : ",-1);function d(t,e,a,r,o,c){return Object(n["p"])(),Object(n["d"])("div",s,[Object(n["f"])("span",l,[Object(n["e"])(Object(n["w"])(t.hour),1),u,Object(n["e"])(Object(n["w"])(t.minute),1)])])}var b=a("b166"),f=1e3,O=Object(n["g"])({name:"current-time",setup:function(){var t=Object(n["s"])(new Date);return Object(n["n"])((function(){setInterval((function(){t.value=new Date}),f)})),{dateObj:t,hour:Object(n["b"])((function(){return Object(b["a"])(t.value,"HH")})),minute:Object(n["b"])((function(){return Object(b["a"])(t.value,"mm")}))}}});O.render=d;var p=O,j={components:{"current-time":p}};j.render=i;var v=j,m=a("9483");Object(m["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var g=a("6c02"),y={class:"salat-next"},h={class:"salat-schedule"},S={class:"salat-schedule__heading"},w={class:"salat-schedule__switcher"},P=Object(n["e"])(" ");function A(t,e,a,r,o,c){var i=Object(n["u"])("loading-cue"),s=Object(n["u"])("notification"),l=Object(n["u"])("salat"),u=Object(n["u"])("current-location"),d=Object(n["u"])("DayDisplay"),b=Object(n["u"])("salat-list");return t.isLoading?(Object(n["p"])(),Object(n["d"])(i,{key:0,"loading-text":t.appPhase},null,8,["loading-text"])):(Object(n["p"])(),Object(n["d"])(n["a"],{key:1},[t.isError?(Object(n["p"])(),Object(n["d"])(s,{key:0,"notification-message":t.appError},null,8,["notification-message"])):(Object(n["p"])(),Object(n["d"])(n["a"],{key:1},[Object(n["f"])("div",y,[Object(n["f"])(l,{salat:t.nextSalat,"disp-type":"next"},null,8,["salat"]),Object(n["f"])(u,{location:t.location},null,8,["location"])]),Object(n["f"])("div",h,[Object(n["f"])("div",S,[Object(n["f"])(d,{dateObj:t.dateToDisplay},null,8,["dateObj"]),Object(n["f"])("div",w,[Object(n["f"])("span",{class:["salat-schedule__switch",{"salat-schedule__switch--inactive":"today"===t.selectedDay}],onClick:e[1]||(e[1]=function(e){return t.selectDay("today")})},"←",2),P,Object(n["f"])("span",{class:["salat-schedule__switch",{"salat-schedule__switch--inactive":"today"!==t.selectedDay}],onClick:e[2]||(e[2]=function(e){return t.selectDay("tomorrow")})},"→",2)])]),Object(n["f"])(b,{"salat-list":"today"===t.selectedDay?t.todaySalat:t.tomorrowSalat},null,8,["salat-list"])])],64))],64))}var _=a("2230"),D=a("5502"),T={class:"current-day"};function E(t,e,a,r,o,c){return Object(n["p"])(),Object(n["d"])("div",T,Object(n["w"])(t.day)+" "+Object(n["w"])(t.date)+" "+Object(n["w"])(t.month)+" "+Object(n["w"])(t.year),1)}var x=Object(n["g"])({name:"DayDisplay",props:{dateObj:{type:Date,required:!0}},setup:function(t){var e=Object(n["x"])(t),a=e.dateObj;return{date:Object(n["b"])((function(){return Object(b["a"])(a.value,"dd")})),day:Object(n["b"])((function(){return Object(b["a"])(a.value,"EEEE")})),month:Object(n["b"])((function(){return Object(b["a"])(a.value,"MMMM")})),year:Object(n["b"])((function(){return Object(b["a"])(a.value,"yyyy")}))}}});x.render=E;var k=x,L={class:"loading-cue"};function R(t,e,a,r,o,c){return Object(n["p"])(),Object(n["d"])("div",L,Object(n["w"])(t.loadingText),1)}var U=Object(n["g"])({props:["loadingText"]});U.render=R;var M=U,N={class:"location"};function z(t,e,a,r,o,c){return Object(n["p"])(),Object(n["d"])("div",N,[Object(n["f"])("div",null,Object(n["w"])(t.area),1),Object(n["f"])("div",null,Object(n["w"])(t.country),1)])}a("a15b");var H=Object(n["g"])({props:{location:{type:Object,required:!0}},setup:function(t){var e=Object(n["b"])((function(){var e=[];return t.location.city?e.push(t.location.city):t.location.village&&e.push(t.location.village),t.location.state&&e.push(t.location.state),e.join(", ")}));return{area:e,country:Object(n["b"])((function(){return t.location.country}))}}});H.render=z;var q=H,F={class:"notification"};function I(t,e,a,r,o,c){return Object(n["p"])(),Object(n["d"])("div",F,Object(n["w"])(t.notificationMessage),1)}var C=Object(n["g"])({props:["notificationMessage"]});C.render=I;var G=C;a("b0c0");function W(t,e,a,r,o,c){var i=Object(n["u"])("time-display");return Object(n["p"])(),Object(n["d"])("div",{class:["salat",t.className("salat--")]},[Object(n["f"])("div",{class:["salat__name",t.className("salat__name--")]},Object(n["w"])(t.salat.name),3),Object(n["f"])("div",{class:["salat__time",t.className("salat__time--")]},[Object(n["f"])(i,{time:t.salat.time},null,8,["time"])],2)],2)}var X={class:"time-display"};function Y(t,e,a,r,o,c){return Object(n["p"])(),Object(n["d"])("div",X,Object(n["w"])(t.time),1)}var J=Object(n["g"])({props:["time"]});J.render=Y;var B=J,K=Object(n["g"])({components:{"time-display":B},props:{salat:{type:Object},dispType:{type:String}},setup:function(t){return{salat:t.salat,className:function(e){return t.dispType?e+t.dispType:""}}}});K.render=W;var Q=K,V={class:"salat-items"};function Z(t,e,a,r,o,c){var i=Object(n["u"])("salat");return Object(n["p"])(),Object(n["d"])("ul",V,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["t"])(t.salatList,(function(t){return Object(n["p"])(),Object(n["d"])("li",{class:"salat-item",key:t.name+t.date},[Object(n["f"])(i,{salat:t},null,8,["salat"])])})),128))])}var $=Object(n["g"])({components:{salat:Q},props:["salatList"]});$.render=Z;var tt=$,et=6e5,at=Object(n["g"])({name:"day",components:{DayDisplay:k,"current-location":q,"loading-cue":M,notification:G,salat:Q,"salat-list":tt},setup:function(){var t=Object(D["b"])(),e=Object(n["s"])("today"),a=Object(n["b"])((function(){return new Date})),r=Object(n["b"])((function(){return Object(_["a"])(new Date,{days:1})})),o=Object(n["b"])((function(){return"today"===e.value?a.value:r.value}));function c(t){e.value=t}return Object(n["n"])((function(){t.dispatch("initializeState"),setInterval((function(){t.dispatch("loadSalat")}),et)})),{selectedDay:e,dateToDisplay:o,appError:Object(n["b"])((function(){return t.getters.appError})),appPhase:Object(n["b"])((function(){return t.getters.appPhase})),isError:Object(n["b"])((function(){return t.getters.isError})),isLoading:Object(n["b"])((function(){return t.getters.isLoading})),location:Object(n["b"])((function(){return t.getters.location})),nextSalat:Object(n["b"])((function(){return t.getters.nextSalat})),todaySalat:Object(n["b"])((function(){return t.getters.todaySalat})),tomorrowSalat:Object(n["b"])((function(){return t.getters.tomorrowSalat})),selectDay:c}}});at.render=A;var nt=at,rt=[{alias:"/salat-time",path:"/",name:"Day",component:nt}],ot=Object(g["a"])({history:Object(g["b"])(""),routes:rt}),ct=ot,it=a("c458"),st=a.n(it),lt=a("1816"),ut=a.n(lt);a("d3b7");function dt(){return new Promise((function(t,e){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(t,e,{enableHighAccuracy:!0}):e(Error("Geolocation not available"))}))}var bt={locate:dt},ft=bt;function Ot(t){if(t.status>=200&&t.status<300||t.ok)return t;var e=new Error(t.statusText);throw e}function pt(t,e){return fetch(t,e).then(Ot).then((function(t){return t.json()})).catch((function(t){throw t}))}var jt={get:pt},vt=jt;function mt(t){var e={};return e.country=t.country_name,e.city=t.city,e.village=t.district,e.state=t.region,e.timezone=t.timezone_name,e.latitude=parseFloat(t.latitude),e.longitude=parseFloat(t.longitude),e}function gt(t){var e={};return e.country=t.address.country,t.address.state_district?e.city=t.address.state_district:e.city=t.address.city,e.village=t.address.village,e.state=t.address.state,e.latitude=parseFloat(t.lat),e.longitude=parseFloat(t.lon),e}var yt={transformIPLocationResponse:mt,transformReverseGeolocationResponse:gt},ht=yt,St={};function wt(){return"https://json.geoiplookup.io/"}function Pt(t){var e="https://nominatim.openstreetmap.org/reverse?format=json&zoom=15&addressdetails=1",a=new ut.a(e,!0),n=a.query;return n.lat=t.latitude,n.lon=t.longitude,a.set("query",n),a.href}St.get=function(){return ft.locate().then((function(t){var e=Pt(t.coords);return vt.get(e).then((function(t){var e=ht.transformReverseGeolocationResponse(t),a=st.a.determine();return e.timezone=a.name(),e}))}),(function(){var t=wt();return vt.get(t).then((function(t){return ht.transformIPLocationResponse(t)}))}))};var At=St,_t=(a("25f0"),a("3ca3"),a("ddb0"),a("f7f1")),Dt=(a("d81d"),a("b64b"),a("1276"),a("ac1f"),a("99af"),a("7db0"),a("2cf3")),Tt=a("1212"),Et={};function xt(t,e){var a=Object.keys(t).map((function(a){var n=t[a].split(":").join(" : ");return{name:a,date:e,time:n}}));return a}function kt(t){var e=Object(Dt["a"])("".concat(t.date," ").concat(t.time),"d MMM yyyy HH : mm",new Date);return!!Object(Tt["a"])(e,new Date)}function Lt(t){var e={};return Object.assign(e,t),delete e.Sunrise,delete e.Sunset,delete e.Imsak,delete e.Midnight,e}Et.transformSalatData=function(t){var e=Lt(t.timings);return xt(e,t.date.readable)},Et.getNextSalat=function(t,e){var a=Et.transformSalatData(t),n=Et.transformSalatData(e);return a.concat(n).find(kt)};var Rt=Et,Ut={};function Mt(t,e){var a="https://api.aladhan.com/timings/",n=new ut.a(a,!0),r=n.query;return n.pathname=[n.pathname,e].join(""),r.latitude=t.latitude.toString(),r.longitude=t.longitude.toString(),r.timezonestring=t.timezone,r.method="3",n.set("query",r),n.href}Ut.get=function(t){var e=Mt(t,Object(b["a"])(new Date,"t")),a=Mt(t,Object(b["a"])(Object(_t["a"])(new Date,1),"t"));return Promise.all([vt.get(e),vt.get(a)]).then((function(t){var e=Rt.transformSalatData(t[0].data),a=Rt.transformSalatData(t[1].data),n=Rt.getNextSalat(t[0].data,t[1].data);return{todaySalat:e,tomorrowSalat:a,nextSalat:n}}))};var Nt=Ut;function zt(t){var e=t.commit;At.get().then((function(t){return e("UPDATE_APPPHASE","locating"),e("UPDATE_LOCATION",t),t})).then((function(t){return e("UPDATE_APPPHASE","loading salat"),Nt.get({latitude:t.latitude,longitude:t.longitude,timezone:t.timezone})})).then((function(t){e("UPDATE_TODAYSALAT",t.todaySalat),e("UPDATE_TOMORROWSALAT",t.tomorrowSalat),e("UPDATE_NEXTSALAT",t.nextSalat),e("UPDATE_APPPHASE","standby")})).catch((function(t){if("Failed to fetch"===t.message){var a=new Error("Network error, please check your connection and disable adblock");e("UPDATE_APPPHASE","network error"),e("UPDATE_APPERROR",a)}console.error(t)}))}function Ht(t){var e=t.commit,a=t.state;Nt.get(a.location).then((function(t){e("UPDATE_TODAYSALAT",t.todaySalat),e("UPDATE_TOMORROWSALAT",t.tomorrowSalat),e("UPDATE_NEXTSALAT",t.nextSalat)}))}var qt,Ft={initializeState:zt,loadSalat:Ht},It=Ft,Ct=function(t){var e=t.appPhase;return"loading salat"===e||"locating"===e},Gt=function(t){var e=t.appPhase;return e.indexOf("error")>-1},Wt=function(t){return t.appPhase},Xt=function(t){return t.appError},Yt=function(t){return t.location},Jt=function(t){return t.todaySalat},Bt=function(t){return t.tomorrowSalat},Kt=function(t){return t.nextSalat},Qt={isLoading:Ct,isError:Gt,appPhase:Wt,appError:Xt,location:Yt,todaySalat:Jt,tomorrowSalat:Bt,nextSalat:Kt},Vt=Qt,Zt=a("ade3"),$t="UPDATE_LOCATION",te="UPDATE_APPPHASE",ee="UPDATE_APPERROR",ae="UPDATE_TODAYSALAT",ne="UPDATE_TOMORROWSALAT",re="UPDATE_NEXTSALAT",oe=(qt={},Object(Zt["a"])(qt,te,(function(t,e){t.appPhase=e})),Object(Zt["a"])(qt,ee,(function(t,e){t.appError=e})),Object(Zt["a"])(qt,$t,(function(t,e){t.location=e})),Object(Zt["a"])(qt,ae,(function(t,e){t.todaySalat=e})),Object(Zt["a"])(qt,ne,(function(t,e){t.tomorrowSalat=e})),Object(Zt["a"])(qt,re,(function(t,e){t.nextSalat=e})),qt),ce=oe,ie=Object(D["a"])({actions:It,getters:Vt,mutations:ce,state:{appPhase:"locating",appError:{},location:{country:"",city:"",time_zone:"",latitude:0,longitude:0},todaySalat:[{name:"",date:"",time:""}],tomorrowSalat:[{name:"",date:"",time:""}],nextSalat:{name:"",date:"",time:""}}});a("ce87");Object(n["c"])(v).use(ie).use(ct).mount("#app")},ce87:function(t,e,a){}});
//# sourceMappingURL=app.7c91ddfc.js.map